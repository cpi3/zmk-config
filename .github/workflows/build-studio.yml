name: Build (studio-enabled)

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  build-studio:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'
      - name: Setup West
        run: |
          pip install west
      - name: Fetch Zephyr and ZMK (west init & update)
        run: |
          west init -l .
          west update
      - name: Build cygnus_left with Studio
        run: |
          west build -b nice_nano_v2 zephyr -- -DSHIELD=cygnus_left -DCONFIG_ZMK_STUDIO=y
      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: cygnus_left_with_studio
          path: build/zephyr/zephyr.hex

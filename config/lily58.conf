# Uncomment to enable encoder
# CONFIG_EC11=y
# CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y
# Name the keyboard
CONFIG_ZMK_KEYBOARD_NAME="Cygnus v3"
# Other settings
# Uncomment the following line to enable the Lily58 OLED Display
# CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_SLEEP=y
# Sleep after 10 minutes
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=600000

# Increase Bluetooth transmission power to max for better connection stability
# DISABLED for troubleshooting: High power might cause radio reboots or instability on some batteries
# CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# --- SPLIT BATTERY SYNC ---
# Disable central battery level fetching to prevent connection stalls if peripheral is slow to respond
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=n
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=n

# Stability improvements for Windows and general connection
CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# --- WINDOWS/CONNECTIVITY TWEAKS ---
# "Just Works" pairing is default and most reliable for Windows. 
# We disable Passkey Entry to fix the "connect -> disconnect" loop caused by security mismatches.
# CONFIG_ZMK_BLE_PASSKEY_ENTRY=y

# Disable 2Mbps PHY for better stability.
# Solves dropouts on some Windows Intel/Realtek Bluetooth drivers.
CONFIG_BT_CTLR_PHY_2M=n

# --- CONNECTION SPEED ---
# Request short connection intervals for faster initial negotiation and lower latency.
# 6 units = 7.5ms, 12 units = 15ms.
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12

# --- TROUBLESHOOTING ---
# UNCOMMENT the line below to clear all bonds on startup.
# Use this ONCE if you cannot connect/pair no matter what.
# 1. Uncomment, 2. Build & Flash, 3. Turn on, 4. Re-comment & Re-flash.
# CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=y

